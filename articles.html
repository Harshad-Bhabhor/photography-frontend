<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Articles</title>

    <link rel="stylesheet" href="https://fabiandesmet.com/portfolio/butler-font/butler.css">

    <style>
        html,
        body {
            max-width: 100%;
            overflow-x: hidden;
        }

        img {
            max-width: 100%;
            height: auto;
        }


        body {
            margin: 0;
            background: #111;
            color: #E6E6E6;
            font-family: 'Butler_Light', 'Segoe UI';
        }

        header {
            background: #def9f8;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 6px 10px 0 0;
        }

        nav {
            position: fixed;
            top: 0;
            right: -100%;
            width: min(80vw, 300px);
            height: 100vh;
            background: #def9f8;
            padding: 80px 40px;
            transition: right .3s;
            z-index: 1000;
        }

        nav.active {
            right: 0;
        }

        nav a {
            display: block;
            color: #000;
            text-decoration: none;
            padding: 12px 0;
        }

        .hamburger {
            background: none;
            border: none;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: #000;
        }

        .articles-hero {
            background: linear-gradient(135deg, #326B82, #306F81);
            padding: 80px 20px;
            text-align: center;
        }

        .articles-hero h1 {
            color: #62CFB1;
            font-size: 42px;
        }

        .articles-container {
            padding: 80px 20px;
            max-width: 1200px;
            margin: auto;
        }

        .articles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
        }

        .article-card {
            background: #1a1a1a;
            border-radius: 8px;
            overflow: hidden;
        }

        .article-card img {
            width: 100%;
            height: 220px;
            object-fit: cover;
        }

        .article-content {
            padding: 25px;
        }

        .article-content h2 {
            color: #62CFB1;
        }

        .article-content a {
            color: #5CC8AB;
            text-decoration: none;
        }

        .single-article {
            max-width: 900px;
            margin: auto;
        }

        .single-article img {
            width: 100%;
            border-radius: 10px;
        }
    </style>
</head>

<body>

    <header>
        <a href="index.html">
            <img src="Assests/logo1.png" style="height:60px">
        </a>
        <nav id="nav-menu">
            <a href="index.html">Home</a>
            <a href="index.html#portfolio">Portfolio</a>
            <a href="articles.html">Articles</a>
            <a href="index.html#about">About</a>
        </nav>
        <button class="hamburger" id="hamburger-btn">
            <span></span><span></span><span></span>
        </button>
    </header>

    <section class="articles-hero">
        <h1>Articles & Insights</h1>
        <p>Photography tips and stories</p>
    </section>

    <section class="articles-container">
        <div id="articles-list" class="articles-grid"></div>

        <div id="single-article" class="single-article" style="display:none;">
            <h1 id="single-title"></h1>
            <p id="single-date"></p>
            <img id="single-image">
            <div id="single-content"></div>
        </div>
    </section>

    <script>
        const API = "https://photography-backend-1.onrender.com";
        const fixUrl = u => u && u.startsWith("http") ? u : API + u;

        const params = new URLSearchParams(window.location.search);
        const slug = params.get("slug");

        if (slug) document.querySelector(".articles-hero").style.display = "none";

        // menu
        document.getElementById("hamburger-btn").onclick = () => {
            document.getElementById("nav-menu").classList.toggle("active");
        };

        fetch(`${API}/api/articles?populate=*`)
            .then(r => r.json())
            .then(res => {
                const articles = res.data || [];

                // single article
                if (slug) {
                    const a = articles.find(x => x.slug === slug);
                    if (!a) return;

                    document.getElementById("articles-list").style.display = "none";
                    document.getElementById("single-article").style.display = "block";

                    document.getElementById("single-title").innerText = a.title;
                    document.getElementById("single-date").innerText = a.publishedAt || "";
                    if (a.thumbnail) {
                        document.getElementById("single-image").src = fixUrl(a.thumbnail.url);
                    }
                    document.getElementById("single-content").innerHTML = a.content || "";
                    return;
                }

                // list view
                const grid = document.getElementById("articles-list");
                grid.innerHTML = "";

                articles.forEach(a => {
                    grid.innerHTML += `
        <div class="article-card">
          <img src="${a.thumbnail ? fixUrl(a.thumbnail.url) : ''}">
          <div class="article-content">
            <h2>${a.title}</h2>
            <p>${a.excerpt || ""}</p>
            <a href="articles.html?slug=${a.slug}">Read More â†’</a>
          </div>
        </div>
      `;
                });
            });
    </script>

</body>

</html>